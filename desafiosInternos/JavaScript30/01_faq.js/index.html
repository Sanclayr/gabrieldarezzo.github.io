<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>FaqJs</title>
</head>
<body style="width: 100%; text-align: center;padding: 0px;margin: 0px;">

	
	<h1>FaqJS (Frequently Asked Questions-Js)</h1>
	
	
	
	<!--
	<input type="text" id="find-txt" />
	-->
	
	Exemplo de resposta do WebService:
	<br />
	<script src="https://gist.github.com/gabrieldarezzo/7ff48d90affe8f64683727e793ae305d.js"></script>
	<hr />
	
		<h2>Preencha abaixo um dos termos da resposta do WebService acima... Ex: 'JavaScript' ou 'Vanilla'</h2>
		<textarea id="find-txt" rows="4" style="width: 80%"></textarea>
	
	
	
	<hr />
	
	<h3>Resultados:</h3>
	
	<div id="result-search">
		<h3 id="result-h3"></h3>
		<div id="result-article"></div>
		
	
	</div>
	
	<script type="text/javascript">
		document.getElementById("find-txt").focus();
	
		var ignoreWords = [
		'de', 'se', 'há', 'algum', 'a', 'ser', 'pelas', 'nas', 'e', 'nos', 'ou', 'da', 'dos', 'a', 'e','tirar'
		,'uma' ,'duvida' ,'em' ,'ao' ,'uma' ,'em' ,'que' ,'o' ,'até' ,'data' ,'do' ,'dia','é' ,'desta'];

		
		//Seria o retorno do WebService.
		var webServiceAjax = [{
			 "id":1
			,"title":"Como virar desenvolvedor JavaScript"
			,"article":"<h3>Para executar um Ajax \u00e9 easy...<\/h3>Primeiro se precisa manjar de JS, tem um curso aqui: <a href=\"https:\/\/github.com\/gabrieldarezzo\/helpjs-ravi\">JS-Curso<\/a>"
			,"link":"https:\/\/github.com\/gabrieldarezzo\/helpjs-ravi"
		}
		,{
			 "id":2
			,"title":"Como executar um Ajax"
			,"article":"Caso voc\u00ea j\u00e1 conhece JS-Vanilla \u00e9 s\u00f3 seguir esse passo a passo: <a href=\"https:\/\/github.com\/gabrieldarezzo\/desafiosInternos\/tree\/master\/ajax\">Guia definitivo AJAX<\/a>"
			,"link":"https:\/\/github.com\/gabrieldarezzo\/desafiosInternos\/tree\/master\/ajax"
		}
		,{
			 "id":3
			,"title":"O que \u00e9 um WebService"
			,"article":"Web service \u00e9 uma solu\u00e7\u00e3o utilizada na integra\u00e7\u00e3o de sistemas e na comunica\u00e7\u00e3o entre aplica\u00e7\u00f5es diferentes. Com esta tecnologia \u00e9 poss\u00edvel que novas aplica\u00e7\u00f5es possam interagir com aquelas que j\u00e1 existem e que sistemas desenvolvidos em plataformas diferentes sejam compat\u00edveis. Os Web services s\u00e3o componentes que permitem \u00e0s aplica\u00e7\u00f5es enviar e receber dados em formato XML. Cada aplica\u00e7\u00e3o pode ter a sua pr\u00f3pria \"linguagem\", que \u00e9 traduzida para uma linguagem universal, um formato intermedi\u00e1rio como XML, Json, CSV, etc."
			,"link":"https:\/\/pt.wikipedia.org\/wiki\/Web_service"
	   }];
		
		
		if(typeof webServiceAjax != 'object'){
			webServiceAjax = JSON.parse(webServiceAjax);
		}
		
		var timer;
		document.getElementById("find-txt").addEventListener('keyup', function() {				
			var textToSearch = this.value;
			if(textToSearch.length < 3){
				document.getElementById("result-h3").innerHTML = '';
				document.getElementById("result-article").innerHTML = '';
				return false;
			}
			if(textToSearch.length < 500){
				//Só Pesquisa após pausa
				timer && clearTimeout(timer);
				timer = setTimeout(instantSearch(textToSearch), 200);
			}
		});
		
		function instantSearch(textToSearch){
			//Usar expressão regular talvez?
			textToSearch = textToSearch.replace("?", "");	
			textToSearch = textToSearch.replace("!", "");
			textToSearch = textToSearch.replace(".", "");
			textToSearch = textToSearch.replace(",", "");
			textToSearch = textToSearch.replace(":", "");
			textToSearch = textToSearch.replace(";", "");
			textToSearch = textToSearch.replace("-", "");
			
			
			var pieces = textToSearch.split(' ');
			
			for(var i in webServiceAjax){
				var faq = webServiceAjax[i];
				
				//Remove todas KeyWord de ligação e redundantes
				for(var x in pieces){
					//Check if has Ignore Words
					for(var y in ignoreWords){
						if(ignoreWords[y] == pieces[x]){
							 pieces.splice(x, 1);
						}
					}
				}
				
				
				//Busca em todas as palavras Ex -> ["system", "Web Services"];
				for(var x in pieces){
				
					
					
					
					var titleToSearch = faq.title.toLowerCase();
					var articleToSearch = faq.article.toLowerCase();
					var toSearch = pieces[x].toLowerCase();
					
					
					
					
					
					
					if(titleToSearch.indexOf(toSearch) !== -1){
						exibirResultado(faq);
						return true;
					}
					
					if(articleToSearch.indexOf(toSearch) !== -1){
						exibirResultado(faq);
						return true;
					}
				}
			}
		}
		
		function exibirResultado(faq){
			document.getElementById("result-h3").innerHTML = faq.title;
			document.getElementById("result-article").innerHTML = faq.article + ' ...<a target="_new" href="'+ faq.link +'">Leia mais</a>';
		}
		
		//exibirResultado(webServiceAjax[0])
	
	
	</script>
</body>
</html>